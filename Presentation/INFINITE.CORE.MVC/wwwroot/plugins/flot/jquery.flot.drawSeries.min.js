!function(o){"use strict";o.plot.drawSeries=new function(){function k(i,n,a,t,e,l,o){function s(i){v=u[i-d],b=u[i-d+1],y=u[i],g=u[i+1]}function m(){return null!==z&&null!==S?(y=v,g=b,v=z,b=S,!(S=z=null)):(b!==g&&v!==y&&(z=y,S=g=b),!1)}function r(){if(b<=g&&b<e.min){if(g<e.min)return 1;v=(e.min-b)/(g-b)*(y-v)+v,b=e.min}else if(g<=b&&g<e.min){if(b<e.min)return 1;y=(e.min-b)/(g-b)*(y-v)+v,g=e.min}}function f(){if(g<=b&&b>e.max){if(g>e.max)return 1;v=(e.max-b)/(g-b)*(y-v)+v,b=e.max}else if(b<=g&&g>e.max){if(b>e.max)return 1;y=(e.max-b)/(g-b)*(y-v)+v,g=e.max}}function x(){if(v<=y&&v<t.min){if(y<t.min)return 1;b=(t.min-v)/(y-v)*(g-b)+b,v=t.min}else if(y<=v&&y<t.min){if(v<t.min)return 1;g=(t.min-v)/(y-v)*(g-b)+b,y=t.min}}function p(){if(y<=v&&v>t.max){if(y>t.max)return 1;b=(t.max-v)/(y-v)*(g-b)+b,v=t.max}else if(v<=y&&y>t.max){if(v>t.max)return 1;g=(t.max-v)/(y-v)*(g-b)+b,y=t.max}}function c(){v===h&&b===T||l.moveTo(t.p2c(v)+n,e.p2c(b)+a),h=y,T=g,l.lineTo(t.p2c(y)+n,e.p2c(g)+a)}var u=i.points,d=i.pointsize,h=null,T=null,v=0,b=0,y=0,g=0,z=null,S=null,w=0;for(l.beginPath(),w=d;w<u.length;w+=d)s(w),null===v||null===y?S=z=null:isNaN(v)||isNaN(y)||isNaN(b)||isNaN(g)?T=h=null:(o&&m()&&(w-=d),r()||f()||x()||p()||c());null!==z&&null!==S&&(s(w),m(),r()||f()||x()||p()||c()),l.stroke()}function b(i,n,a,t,e,l,o,s,m,r,f){var x,p,c,u=i+t,d=i+e,h=a,T=n,v=!1,b=x=p=!0;r?(b=!(v=x=p=!0),T=n+t,h=n+e,(d=i)<(u=a)&&(c=d,d=u,u=c,x=!(b=!0))):(v=!(b=x=p=!0),u=i+t,d=i+e,(T=n)<(h=a)&&(c=T,T=h,h=c,p=!(v=!0))),d<o.min||u>o.max||T<s.min||h>s.max||(u<o.min&&(u=o.min,b=!1),d>o.max&&(d=o.max,x=!1),h<s.min&&(h=s.min,v=!1),T>s.max&&(T=s.max,p=!1),u=o.p2c(u),h=s.p2c(h),d=o.p2c(d),T=s.p2c(T),l&&(m.fillStyle=l(h,T),m.fillRect(u,T,d-u,h-T)),0<f&&(b||x||p||v)&&(m.beginPath(),m.moveTo(u,h),b?m.lineTo(u,T):m.moveTo(u,T),p?m.lineTo(d,T):m.moveTo(d,T),x?m.lineTo(d,h):m.moveTo(d,h),v?m.lineTo(u,h):m.moveTo(u,h),m.stroke()))}function N(i,n,a,t,e){var l=i.fill;return l?i.fillColor?e(i.fillColor,a,t,n):((e=o.color.parse(n)).a="number"==typeof l?l:.4,e.normalize(),e.toString()):null}this.drawSeriesLines=function(i,n,a,t,e,l,o){if(n.save(),n.translate(a.left,a.top),n.lineJoin="round",i.lines.dashes&&n.setLineDash&&n.setLineDash(i.lines.dashes),a={format:i.datapoints.format,points:i.datapoints.points,pointsize:i.datapoints.pointsize},i.decimate&&(a.points=i.decimate(i,i.xaxis.min,i.xaxis.max,t,i.yaxis.min,i.yaxis.max,e)),t=i.lines.lineWidth,n.lineWidth=t,n.strokeStyle=i.color,e=N(i.lines,i.color,0,e,o)){n.fillStyle=e;for(var o=a,s=i.xaxis,m=i.yaxis,e=i.lines.fillTowards||0,r=n,f=i.lines.steps,x=o.points,p=o.pointsize,c=e>m.min?Math.min(m.max,e):m.min,u=0,d=1,h=!1,T=0,v=0,b=null,y=null;!(0<p&&u>x.length+p);){var g,z,S=x[(u+=p)-p],w=x[u-p+d],P=x[u],W=x[u+d];if(-2===p&&(w=W=c),h){if(0<p&&null!=S&&null==P){v=u,p=-p,d=2;continue}if(p<0&&u===T+p){r.fill(),h=!1,d=1,u=T=v+(p=-p);continue}}if(null==S||null==P)y=b=null;else{if(f&&(null!==b&&null!==y?(P=S,W=w,S=b,w=y,y=b=null,u-=p):w!==W&&S!==P&&(b=P,y=W=w)),S<=P&&S<s.min){if(P<s.min)continue;w=(s.min-S)/(P-S)*(W-w)+w,S=s.min}else if(P<=S&&P<s.min){if(S<s.min)continue;W=(s.min-S)/(P-S)*(W-w)+w,P=s.min}if(P<=S&&S>s.max){if(P>s.max)continue;w=(s.max-S)/(P-S)*(W-w)+w,S=s.max}else if(S<=P&&P>s.max){if(S>s.max)continue;W=(s.max-S)/(P-S)*(W-w)+w,P=s.max}h||(r.beginPath(),r.moveTo(s.p2c(S),m.p2c(c)),h=!0),w>=m.max&&W>=m.max?(r.lineTo(s.p2c(S),m.p2c(m.max)),r.lineTo(s.p2c(P),m.p2c(m.max))):w<=m.min&&W<=m.min?(r.lineTo(s.p2c(S),m.p2c(m.min)),r.lineTo(s.p2c(P),m.p2c(m.min))):(g=S,z=P,w<=W&&w<m.min&&W>=m.min?(S=(m.min-w)/(W-w)*(P-S)+S,w=m.min):W<=w&&W<m.min&&w>=m.min&&(P=(m.min-w)/(W-w)*(P-S)+S,W=m.min),W<=w&&w>m.max&&W<=m.max?(S=(m.max-w)/(W-w)*(P-S)+S,w=m.max):w<=W&&W>m.max&&w<=m.max&&(P=(m.max-w)/(W-w)*(P-S)+S,W=m.max),S!==g&&r.lineTo(s.p2c(g),m.p2c(w)),r.lineTo(s.p2c(S),m.p2c(w)),r.lineTo(s.p2c(P),m.p2c(W)),P!==z&&(r.lineTo(s.p2c(P),m.p2c(W)),r.lineTo(s.p2c(z),m.p2c(W))))}}}0<t&&k(a,0,0,i.xaxis,i.yaxis,n,i.lines.steps),n.restore()},this.drawSeriesPoints=function(i,n,a,t,e,l,o){function s(i,n,a,t,e,l){i.moveTo(n+t,a),i.arc(n,a,t,0,e?Math.PI:2*Math.PI,!1)}s.fill=!0,n.save(),n.translate(a.left,a.top);var m,a={format:i.datapoints.format,points:i.datapoints.points,pointsize:i.datapoints.pointsize},t=(i.decimatePoints&&(a.points=i.decimatePoints(i,i.xaxis.min,i.xaxis.max,t,i.yaxis.min,i.yaxis.max,e)),i.points.lineWidth),e=i.points.radius,r=("circle"===(r=i.points.symbol)?m=s:"string"==typeof r&&l&&l[r]?m=l[r]:"function"==typeof l&&(m=l),n.lineWidth=t=0===t?1e-4:t,n.fillStyle=N(i.points,i.color,null,null,o),n.strokeStyle=i.color,a),f=e,x=!0,p=0,c=!1,u=i.xaxis,d=i.yaxis,h=m,T=r.points,v=r.pointsize;n.beginPath();for(var b=0;b<T.length;b+=v){var y=T[b],g=T[b+1];null==y||y<u.min||y>u.max||g<d.min||g>d.max||(y=u.p2c(y),g=d.p2c(g)+p,h(n,y,g,f,c,x))}h.fill&&!c&&n.fill(),n.stroke(),n.restore()},this.drawSeriesBars=function(a,i,n,t,e,l,o){i.save(),i.translate(n.left,n.top);var s,n={format:a.datapoints.format,points:a.datapoints.points,pointsize:a.datapoints.pointsize},m=(a.decimate&&(n.points=a.decimate(a,a.xaxis.min,a.xaxis.max,t)),i.lineWidth=a.bars.lineWidth,i.strokeStyle=a.color,a.bars.barWidth[0]||a.bars.barWidth);switch(a.bars.align){case"left":s=0;break;case"right":s=-m;break;default:s=-m/2}for(var r,t=a.bars.fill?function(i,n){return N(a.bars,a.color,i,n,o)}:null,f=s,x=s+m,p=t,c=a.xaxis,u=a.yaxis,d=n.points,h=n.pointsize,T=(n=a.bars.fillTowards||0)>u.min?Math.min(u.max,n):u.min,v=0;v<d.length;v+=h)null!=d[v]&&(r=3===h?d[v+2]:T,b(d[v],d[v+1],r,f,x,p,c,u,i,a.bars.horizontal,a.bars.lineWidth));i.restore()},this.drawBar=b}}(jQuery);