jQuery.plot.plugins.push({init:function(s){s.hooks.processDatapoints.push(function(s,n,o){if(null!=n.stack&&!1!==n.stack){var i=n.bars.show||n.lines.show&&n.lines.fill,t=2<o.pointsize&&(n.bars.horizontal?o.format[2].x:o.format[2].y);if(i&&!t){for(var t=n,e=o,l=[],a=0;a<e.points.length;a+=2)l.push(e.points[a]),l.push(e.points[a+1]),l.push(0);e.format.push({x:t.bars.horizontal,y:!t.bars.horizontal,number:!0,required:!1,computeRange:"none"!==t.yaxis.options.autoScale,defaultValue:0}),e.points=l,e.pointsize=3}t=function(s,n){for(var o=null,i=0;i<n.length&&s!==n[i];++i)n[i].stack===s.stack&&(o=n[i]);return o}(n,s.getData());if(t){for(var r,u,p,f,h,c,g,k=o.pointsize,z=o.points,b=t.datapoints.pointsize,m=t.datapoints.points,v=[],d=n.lines.show,s=n.bars.horizontal,y=d&&n.lines.steps,w=!0,x=s?1:0,D=s?0:1,j=0,q=0;;){if(j>=z.length)break;if(c=v.length,null==z[j]){for(g=0;g<k;++g)v.push(z[j+g]);j+=k}else if(q>=m.length){if(!d)for(g=0;g<k;++g)v.push(z[j+g]);j+=k}else if(null==m[q]){for(g=0;g<k;++g)v.push(null);w=!0,q+=b}else{if(r=z[j+x],u=z[j+D],p=m[q+x],f=m[q+D],h=0,r===p){for(g=0;g<k;++g)v.push(z[j+g]);v[c+D]+=f,h=f,j+=k,q+=b}else if(p<r){if(d&&0<j&&null!=z[j-k]){for(u=u+(z[j-k+D]-u)*(p-r)/(z[j-k+x]-r),v.push(p),v.push(u+f),g=2;g<k;++g)v.push(z[j+g]);h=f}q+=b}else{if(w&&d){j+=k;continue}for(g=0;g<k;++g)v.push(z[j+g]);d&&0<q&&null!=m[q-b]&&(h=f+(m[q-b+D]-f)*(r-p)/(m[q-b+x]-p)),v[c+D]+=h,j+=k}w=!1,c!==v.length&&i&&(v[c+2]+=h)}if(y&&c!==v.length&&0<c&&null!==v[c]&&v[c]!==v[c-k]&&v[c+1]!==v[c-k+1]){for(g=0;g<k;++g)v[c+k+g]=v[c+g];v[c+1]=v[c-k+1]}}o.points=v}}})},options:{series:{stack:null}},name:"stack",version:"1.2"});