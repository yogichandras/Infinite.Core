!function(){"use strict";function e(n,t){var a,o={twoTouches:!1,currentTapStart:{x:0,y:0},currentTapEnd:{x:0,y:0},prevTap:{x:0,y:0},currentTap:{x:0,y:0},interceptedLongTap:!1,isUnsupportedGesture:!1,prevTapTime:null,tapStartTime:null,longTapTriggerId:null},r=20,u=500;function p(t){var e=n.getOptions();(e.pan.active||e.zoom.active)&&(3<=t.touches.length?o.isUnsupportedGesture=!0:o.isUnsupportedGesture=!1,a.dispatchEvent(new CustomEvent("touchevent",{detail:t})),E(t)?c(t,"pinch"):(c(t,"pan"),m(t)||(function(t){var e=(new Date).getTime(),n=e-o.prevTapTime;if(0<=n&&n<u&&l(o.prevTap.x,o.prevTap.y,o.currentTap.x,o.currentTap.y)<r)return t.firstTouch=o.prevTap,t.secondTouch=o.currentTap,1;return o.prevTapTime=e,0}(t)&&c(t,"doubleTap"),c(t,"tap"),c(t,"longTap"))))}function c(t,e){switch(e){case"pan":i[t.type](t);break;case"pinch":s[t.type](t);break;case"doubleTap":T.onDoubleTap(t);break;case"longTap":d[t.type](t);break;case"tap":h[t.type](t)}}var i={touchstart:function(t){var e;o.prevTap={x:o.currentTap.x,y:o.currentTap.y},g(t),e=t,o.tapStartTime=(new Date).getTime(),o.interceptedLongTap=!1,o.currentTapStart={x:e.touches[0].pageX,y:e.touches[0].pageY},o.currentTapEnd={x:e.touches[0].pageX,y:e.touches[0].pageY},a.dispatchEvent(new CustomEvent("panstart",{detail:t}))},touchmove:function(t){v(t),g(t),o.currentTapEnd={x:t.touches[0].pageX,y:t.touches[0].pageY},o.isUnsupportedGesture||a.dispatchEvent(new CustomEvent("pandrag",{detail:t}))},touchend:function(t){var e;v(t),m(t)?(a.dispatchEvent(new CustomEvent("pinchend",{detail:t})),a.dispatchEvent(new CustomEvent("panstart",{detail:t}))):(e=t).touches&&0===e.touches.length&&a.dispatchEvent(new CustomEvent("panend",{detail:t}))}},s={touchstart:function(t){a.dispatchEvent(new CustomEvent("pinchstart",{detail:t}))},touchmove:function(t){v(t),o.twoTouches=E(t),o.isUnsupportedGesture||a.dispatchEvent(new CustomEvent("pinchdrag",{detail:t}))},touchend:function(t){v(t)}},T={onDoubleTap:function(t){v(t),a.dispatchEvent(new CustomEvent("doubletap",{detail:t}))}},d={touchstart:function(t){d.waitForLongTap(t)},touchmove:function(t){},touchend:function(t){o.longTapTriggerId&&(clearTimeout(o.longTapTriggerId),o.longTapTriggerId=null)},isLongTap:function(t){return 1500<=(new Date).getTime()-o.tapStartTime&&!o.interceptedLongTap&&l(o.currentTapStart.x,o.currentTapStart.y,o.currentTapEnd.x,o.currentTapEnd.y)<20&&(o.interceptedLongTap=!0)},waitForLongTap:function(t){o.longTapTriggerId||(o.longTapTriggerId=setTimeout(function(){d.isLongTap(t)&&a.dispatchEvent(new CustomEvent("longtap",{detail:t})),o.longTapTriggerId=null},1500))}},h={touchstart:function(t){o.tapStartTime=(new Date).getTime()},touchmove:function(t){},touchend:function(t){h.isTap(t)&&(a.dispatchEvent(new CustomEvent("tap",{detail:t})),v(t))},isTap:function(t){return(new Date).getTime()-o.tapStartTime<=125&&l(o.currentTapStart.x,o.currentTapStart.y,o.currentTapEnd.x,o.currentTapEnd.y)<20}};function g(t){o.currentTap={x:t.touches[0].pageX,y:t.touches[0].pageY}}function v(t){o.isUnsupportedGesture||(t.preventDefault(),n.getOptions().propagateSupportedGesture)||t.stopPropagation()}function l(t,e,n,a){return Math.sqrt((t-n)*(t-n)+(e-a)*(e-a))}function m(t){return o.twoTouches&&1===t.touches.length}function E(t){return!!(t.touches&&2<=t.touches.length&&t.touches[0].target===n.getEventHolder()&&t.touches[1].target===n.getEventHolder())}!0!==t.pan.enableTouch&&!t.zoom.enableTouch||(n.hooks.bindEvents.push(function(t,e){a=e[0],e[0].addEventListener("touchstart",p,!1),e[0].addEventListener("touchmove",p,!1),e[0].addEventListener("touchend",p,!1)}),n.hooks.shutdown.push(function(t,e){e[0].removeEventListener("touchstart",p),e[0].removeEventListener("touchmove",p),e[0].removeEventListener("touchend",p),o.longTapTriggerId&&(clearTimeout(o.longTapTriggerId),o.longTapTriggerId=null)}))}jQuery.plot.plugins.push({init:function(t){t.hooks.processOptions.push(e)},options:{propagateSupportedGesture:!1},name:"navigateTouch",version:"0.3"})}();