!function(m){m.plot.plugins.push({init:function(o){function h(o,s,t,n,l){for(var h,e,r,i,p,u=t.pointsize,a=m.extend({},s),f=(a.datapoints={points:[],pointsize:u,format:t.format},a.label=null,a.color=l,a.threshold=null,a.originSeries=s,a.data=[],t.points),d=s.lines.show,c=[],g=[],b=0;b<f.length;b+=u){if(h=f[b],i=r,r=(e=f[b+1])<n?c:g,d&&i!==r&&null!==h&&0<b&&null!=f[b-u]){var w=h+(n-e)*(h-f[b-u])/(e-f[b-u+1]);for(i.push(w),i.push(n),p=2;p<u;++p)i.push(f[b+p]);for(r.push(null),r.push(null),p=2;p<u;++p)r.push(f[b+p]);for(r.push(w),r.push(n),p=2;p<u;++p)r.push(f[b+p])}for(r.push(h),r.push(e),p=2;p<u;++p)r.push(f[b+p])}t.points=g,a.datapoints.points=c,0<a.datapoints.points.length&&(l=m.inArray(s,o.getData()),o.getData().splice(l+1,0,a))}o.hooks.processDatapoints.push(function(t,n,l){n.threshold&&(n.threshold instanceof Array?(n.threshold.sort(function(o,s){return o.below-s.below}),m(n.threshold).each(function(o,s){h(t,n,l,s.below,s.color)})):h(t,n,l,n.threshold.below,n.threshold.color))})},options:{series:{threshold:null}},name:"threshold",version:"1.2"})}(jQuery);